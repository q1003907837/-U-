webpackJsonp([5],{"69Ag":function(t,e){},Eqb9:function(t,e){},"G5+P":function(t,e){},UedI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),r=i.n(a),n=i("2cek"),o={props:["cateList"],data:function(){return{}},methods:{edit:function(t){n.a.$emit("sendCateDate",r()({},t))},del:function(t){var e=this;this.$myConfirm(function(){e.$http.post("/catedelete",{id:t}).then(function(t){200===t.code?(e.$success(t.msg),e.$emit("updateList")):e.$error(t.msg)})})}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.cateList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[i("el-table-column",{attrs:{prop:"id",label:"id","min-width":"80"}}),t._v(" "),i("el-table-column",{attrs:{prop:"img",label:"分类图片","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!==e.row.img?i("img",{staticStyle:{height:"80px"},attrs:{src:t.$imgBaseUrl+e.row.img,alt:""}}):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"catename",label:"分类名称","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?i("el-tag",{attrs:{type:"success"}},[t._v("正常")]):i("el-tag",{attrs:{type:"danger"}},[t._v("禁用")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",circle:"",type:"success",icon:"el-icon-edit"},on:{click:function(i){return t.edit(e.row)}}}),t._v(" "),i("el-button",{attrs:{size:"mini",circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(i){return t.del(e.row.id)}}})]}}])})],1)},staticRenderFns:[]};var l=i("VU/8")(o,s,!1,function(t){i("G5+P")},null,null).exports,c=i("NYxO"),u={props:["info"],computed:r()({},Object(c.c)({cateList:function(t){return t.cate.cateList}})),created:function(){var t=this;n.a.$on("sendCateDate",function(e){t.info.isShow=!0,t.formData=e,t.fileList=[{url:t.$imgBaseUrl+e.img}]})},data:function(){return{dialogImageUrl:"",dialogVisible:!1,fileList:[],formData:{pid:0,catename:"",img:"",status:""},rules:{pid:{required:!0,message:"请选择上级",trigger:"blur"},catename:{required:!0,message:"请输入分类名称",trigger:"blur"},status:{required:!0,message:"请选择状态",trigger:"blur"}}}},methods:{handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},fileChange:function(t){this.formData.img=t.raw},limitTips:function(){this.$error("最多只能上传一张")},submit:function(){var t=this;this.$refs.formRef.validate(function(e){if(e){var i=new FormData;for(var a in delete t.formData.children,t.formData)i.append(a,t.formData[a]);var r=t.formData.id>0?"/cateedit":"/cateadd";t.$http.post(r,i).then(function(e){200===e.code?(t.$success(e.msg),t.$emit("updateList"),t.reset()):t.$error(e.msg)})}})},reset:function(){this.fileList=[],this.$refs.formRef.resetFields(),this.formData={pid:0,catename:"",img:"123",status:""},this.info.isShow=!1}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.formData.id>0?"编辑":"新增",visible:t.info.isShow},on:{close:t.reset,"update:visible":function(e){return t.$set(t.info,"isShow",e)}}},[i("el-form",{ref:"formRef",attrs:{model:t.formData,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"上级",prop:"pid"}},[i("el-select",{model:{value:t.formData.pid,callback:function(e){t.$set(t.formData,"pid",e)},expression:"formData.pid"}},[i("el-option",{attrs:{value:0,label:"顶级分类"}}),t._v(" "),t._l(t.cateList,function(t){return i("el-option",{key:t.id,attrs:{value:t.id,label:t.catename}})})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"名称",prop:"catename"}},[i("el-input",{attrs:{placeholder:"名称"},model:{value:t.formData.catename,callback:function(e){t.$set(t.formData,"catename",e)},expression:"formData.catename"}})],1),t._v(" "),0!==t.formData.pid?i("el-form-item",{attrs:{label:"图片",prop:"img"}},[i("el-upload",{ref:"upload",attrs:{action:"#","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"auto-upload":!1,"on-change":t.fileChange,limit:1,"on-exceed":t.limitTips,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio-group",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[i("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("禁用")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.reset}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var f={components:{List:l,Modal:i("VU/8")(u,d,!1,function(t){i("69Ag")},null,null).exports},created:function(){this.getCateListAction()},computed:r()({},Object(c.c)({cateList:function(t){return t.cate.cateList}})),methods:r()({},Object(c.b)("cate",["getCateListAction"]),{updateList:function(){this.getCateListAction()}}),data:function(){return{info:{isShow:!1}}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.info.isShow=!t.info.isShow}}},[t._v("新增")]),t._v(" "),i("el-divider"),t._v(" "),i("List",{attrs:{cateList:t.cateList},on:{updateList:t.updateList}}),t._v(" "),i("Modal",{attrs:{info:t.info},on:{updateList:t.updateList}})],1)},staticRenderFns:[]};var p=i("VU/8")(f,m,!1,function(t){i("Eqb9")},null,null);e.default=p.exports}});
//# sourceMappingURL=5.d204a0247e14431df65e.js.map