webpackJsonp([4],{AT8e:function(t,e){},GDaq:function(t,e){},dTqi:function(t,e){},haI7:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),n=s("NYxO"),r=s("2cek"),o={props:["specsList","specsTotal","size","page"],methods:{pageChange:function(t){this.$emit("sendData",t)},edit:function(t){r.a.$emit("sendSpecsData",i()({},t))},del:function(t){var e=this;this.$myConfirm(function(){e.$http.post("/specsdelete",{id:t}).then(function(t){200===t.code?(e.$success(t.msg),e.$emit("updateList"),Math.ceil(e.specsTotal/e.size)===e.page&&e.specsTotal%e.size==1&&e.$emit("updateList",e.page-1)):e.$error(t.msg)})})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.specsList}},[s("el-table-column",{attrs:{prop:"id",label:"id","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"specsname",label:"规格名称","min-width":"180"}}),t._v(" "),s("el-table-column",{attrs:{prop:"attrs","min-width":"180",label:"规格可选值"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.attrs,function(e,a){return s("el-tag",{key:a,attrs:{type:"success"}},[t._v(t._s(e))])})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"status","min-width":"180",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?s("el-tag",{attrs:{type:"success"}},[t._v("正常")]):s("el-tag",{attrs:{type:"danger"}},[t._v("禁用")])]}}])}),t._v(" "),s("el-table-column",{attrs:{"min-width":"180",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"success",size:"mini",circle:"",icon:"el-icon-edit"},on:{click:function(s){return t.edit(e.row)}}}),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",circle:"",icon:"el-icon-delete"},on:{click:function(s){return t.del(e.row.id)}}})]}}])})],1),t._v(" "),s("el-pagination",{attrs:{"page-size":t.size,background:"",layout:"prev, pager, next",total:t.specsTotal},on:{"current-change":t.pageChange}})],1)},staticRenderFns:[]};var l={created:function(){var t=this;r.a.$on("sendSpecsData",function(e){t.formData=e,t.attrs=e.attrs,t.info.isShow=!0})},props:["info"],data:function(){var t=this;return{attrs:[""],formData:{specsname:"",attrs:"",status:""},rules:{specsname:{required:!0,message:"请输入规格名称",trigger:"blur"},status:{required:!0,message:"请选择状态",trigger:"blur"},attrs:{validator:function(e,s,a){var i=!0;if(t.attrs.forEach(function(t){""===t&&(i=!1)}),!i)return a(new Error("请输入规格属性可选值"));a()},trigger:"blur"}}}},methods:{submit:function(){var t=this;this.$refs.formRef.validate(function(e){if(e){t.formData.attrs=t.attrs.join(",");var s=t.formData.id>0?"/specsedit":"/specsadd";t.$http.post(s,t.formData).then(function(e){200===e.code?(t.$success(e.msg),t.$emit("updateList"),t.reset()):t.$error(e.msg)})}})},reset:function(){this.formData={specsname:"",status:"",attrs:""},this.attrs=[""],this.$refs.formRef.resetFields(),this.info.isShow=!1},addAttr:function(){if(this.attrs.length>=5)return this.$error("最多只能添加5个属性值");this.attrs.push("")},delAttr:function(t){this.attrs.splice(t,1)}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:t.formData.id>0?"编辑":"新增",visible:t.info.isShow},on:{close:t.reset,"update:visible":function(e){return t.$set(t.info,"isShow",e)}}},[s("el-form",{ref:"formRef",attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"规格名称",prop:"specsname"}},[s("el-input",{attrs:{placeholder:"规格名称"},model:{value:t.formData.specsname,callback:function(e){t.$set(t.formData,"specsname",e)},expression:"formData.specsname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"规格可选值",prop:"attrs"}},t._l(t.attrs,function(e,a){return s("div",{key:a,staticClass:"item"},[s("el-input",{attrs:{placeholder:"规格可选值"},model:{value:t.attrs[a],callback:function(e){t.$set(t.attrs,a,"string"==typeof e?e.trim():e)},expression:"attrs[index]"}}),t._v(" "),0===a?s("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.addAttr}},[t._v("新增")]):s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.delAttr(a)}}},[t._v("删除")])],1)}),0),t._v(" "),s("el-form-item",{attrs:{label:"状态",prop:"status"}},[s("el-radio-group",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[s("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),s("el-radio",{attrs:{label:2}},[t._v("禁用")])],1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.reset}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var p={components:{List:s("VU/8")(o,c,!1,function(t){s("dTqi")},"data-v-26ce5384",null).exports,Modal:s("VU/8")(l,u,!1,function(t){s("GDaq")},"data-v-39248382",null).exports},data:function(){return{info:{isShow:!1},page:1,size:3}},methods:i()({},Object(n.b)("specs",["getSpecsListAction","getSpecsTotalAction"]),{sendData:function(t){this.page=t,this.getSpecsListAction({page:this.page,size:this.size})},updateList:function(t){t&&(this.page=t),this.getSpecsListAction({page:this.page,size:this.size}),this.getSpecsTotalAction()}}),created:function(){this.getSpecsListAction({page:this.page,size:this.size}),this.getSpecsTotalAction()},computed:i()({},Object(n.c)({specsList:function(t){return t.specs.specsList},specsTotal:function(t){return t.specs.specsTotal}}))},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",[s("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.info.isShow=!t.info.isShow}}},[t._v("新增")]),t._v(" "),s("el-divider"),t._v(" "),s("List",{attrs:{specsList:t.specsList,specsTotal:t.specsTotal,size:t.size,page:t.page},on:{sendData:t.sendData,updateList:t.updateList}}),t._v(" "),s("Modal",{attrs:{info:t.info},on:{updateList:t.updateList}})],1)},staticRenderFns:[]};var f=s("VU/8")(p,d,!1,function(t){s("AT8e")},null,null);e.default=f.exports}});
//# sourceMappingURL=4.2e3a12a0db476c92cd64.js.map