webpackJsonp([7],{"/wdL":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),n=i("NYxO"),o=i("2cek"),r={props:["adminTotal","adminList","size","page"],data:function(){return{}},methods:{pageUpdate:function(t){this.$emit("updatePage",t)},edit:function(t){o.a.$emit("sendAdminData",s()({},t))},del:function(t){var e=this;this.$myConfirm(function(){e.$http.post("/userdelete",{uid:t}).then(function(t){200===t.code?(e.$success(t.msg),e.$emit("updateList"),Math.ceil(e.adminTotal/e.size)===e.page&&e.adminTotal%e.size==1&&e.$emit("updatePage",e.page-1)):e.$error(t.msg)})})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.adminList}},[i("el-table-column",{attrs:{prop:"id",label:"id","min-width":"80"}}),t._v(" "),i("el-table-column",{attrs:{prop:"rolename",label:"角色","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?i("el-tag",{attrs:{type:"success"}},[t._v("正常")]):i("el-tag",{attrs:{type:"danger"}},[t._v("禁用")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",circle:"",type:"success",icon:"el-icon-edit"},on:{click:function(i){return t.edit(e.row)}}}),t._v(" "),i("el-button",{attrs:{size:"mini",circle:"",type:"danger",icon:"el-icon-delete"},on:{click:function(i){return t.del(e.row.uid)}}})]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"page-size":t.size,background:"",layout:"prev, pager, next",total:t.adminTotal},on:{"current-change":t.pageUpdate}})],1)},staticRenderFns:[]};var u=i("VU/8")(r,l,!1,function(t){i("O4DJ")},null,null).exports,d={computed:s()({},Object(n.c)({roleList:function(t){return t.role.roleList}})),props:["info"],data:function(){return{formData:{roleid:"",username:"",password:"",status:""},rules:{roleid:{required:!0,message:"请选择角色",trigger:"blur"},username:{required:!0,message:"请输入账号",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},status:{required:!0,message:"请选择状态",trigger:"blur"}}}},methods:s()({},Object(n.b)("role",["getRoleListAction"]),{submit:function(){var t=this;this.$refs.formRef.validate(function(e){if(e){var i=t.formData.id>0?"/useredit":"/useradd";t.$http.post(i,t.formData).then(function(e){200===e.code?(t.$success(e.msg),t.$emit("updateList"),t.reset()):t.$error(e.msg)})}})},reset:function(){this.formData={roleid:"",username:"",password:"",status:""},this.info.isShow=!1}}),created:function(){var t=this;this.getRoleListAction(),o.a.$on("sendAdminData",function(e){e.password="",t.formData=e,t.info.isShow=!0})}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.formData.id>0?"编辑":"添加",visible:t.info.isShow},on:{close:t.reset,"update:visible":function(e){return t.$set(t.info,"isShow",e)}}},[i("el-form",{ref:"formRef",attrs:{"label-width":"80px",model:t.formData,rules:t.rules}},[i("el-form-item",{attrs:{label:"角色",prop:"roleid"}},[i("el-select",{model:{value:t.formData.roleid,callback:function(e){t.$set(t.formData,"roleid",e)},expression:"formData.roleid"}},t._l(t.roleList,function(t){return i("el-option",{key:t.id,attrs:{label:t.rolename,value:t.id}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"账号",prop:"username"}},[i("el-input",{attrs:{placeholder:"账号"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio-group",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[i("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("禁用")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.reset}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var m=i("VU/8")(d,c,!1,function(t){i("zN3S")},null,null).exports,p={data:function(){return{info:{isShow:!1},page:1,size:2}},computed:s()({},Object(n.c)({adminList:function(t){return t.admin.adminList},adminTotal:function(t){return t.admin.adminTotal}})),methods:s()({},Object(n.b)("admin",["getAdminListAction","getAdminTotalAction"]),{updatePage:function(t){this.page=t,this.getAdminListAction({page:this.page,size:this.size})},updateList:function(){this.getAdminListAction({page:this.page,size:this.size}),this.getAdminTotalAction()}}),components:{List:u,Modal:m},created:function(){this.getAdminListAction({page:this.page,size:this.size}),this.getAdminTotalAction()}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(e){t.info.isShow=!t.info.isShow}}},[t._v("新增")]),t._v(" "),i("el-divider"),t._v(" "),i("List",{attrs:{size:t.size,page:t.page,adminList:t.adminList,adminTotal:t.adminTotal},on:{updateList:t.updateList,updatePage:t.updatePage}}),t._v(" "),i("Modal",{attrs:{info:t.info},on:{updateList:t.updateList}})],1)},staticRenderFns:[]};var g=i("VU/8")(p,f,!1,function(t){i("QycV")},null,null);e.default=g.exports},O4DJ:function(t,e){},QycV:function(t,e){},zN3S:function(t,e){}});
//# sourceMappingURL=7.cb2b4bb228e2e94beaae.js.map